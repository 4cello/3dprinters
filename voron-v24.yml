---
name: voron-v24

services:
  klipper:
    extends:
      file: common-services.yml
      service: klipper
    volumes:
      - ./voron-v24/gcode:/opt/printer_data/gcodes
      - ./voron-v24/config:/opt/printer_data/config
      - ./common:/opt/printer_data/common
      # - ./common/printer.base.cfg:/opt/printer_data/config/printer.base.cfg
      # - ./common/mainsail.cfg:/opt/printer_data/config/mainsail.cfg
      # - ./common/timelapse.cfg:/opt/printer_data/config/timelapse.cfg
      # - ./voron-v24/config/printer.cfg:/opt/printer_data/config/printer.cfg
      # - ./voron-v24/config/toolhead.cfg:/opt/printer_data/config/toolhead.cfg
      # - ./voron-v24/config/stealthburner_leds.cfg:/opt/printer_data/config/stealthburner_leds.cfg

  moonraker:
    extends:
      file: common-services.yml
      service: moonraker
    ports:
      - 7126:7125
    volumes:
      - ./voron-v24/gcode:/opt/printer_data/gcodes
      - ./voron-v24/timelapse:/opt/printer_data/timelapse
      - ./voron-v24/config:/opt/printer_data/config
      - ./common:/opt/printer_data/common
      # - ./common/moonraker.secrets:/opt/printer_data/moonraker.secrets # TODO: Symlink
      # - ./common/moonraker.base.conf:/opt/printer_data/config/moonraker.base.conf
      # - ./common/printer.base.cfg:/opt/printer_data/config/printer.base.cfg
      # - ./voron-v24/config/moonraker.conf:/opt/printer_data/config/moonraker.conf
      # - ./voron-v24/config/printer.cfg:/opt/printer_data/config/printer.cfg
      # - ./voron-v24/config/toolhead.cfg:/opt/printer_data/config/toolhead.cfg
      # - ./voron-v24/config/stealthburner_leds.cfg:/opt/printer_data/config/stealthburner_leds.cfg

  telegram:
    extends:
      file: common-services.yml
      service: telegram
    volumes:
      - ./voron-v24/gcode:/opt/printer_data/gcodes
      - ./voron-v24/log:/opt/printer_data/logs
      - ./voron-v24/config/telegram.conf:/opt/printer_data/config/telegram.conf

  ustreamer:
    extends:
      file: common-services.yml
      service: ustreamer
    devices:
      - /dev/videoPrinter0:/dev/webcam
    ports:
      - 8080:8080

volumes:
  run:
    name: ${COMPOSE_PROJECT_NAME}-run
